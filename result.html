<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>í‰ê°€ ê²°ê³¼ â€” KASG LMS</title>
<link rel="stylesheet" href="css/main.css">
<style>
  body {
    background: #F0EDE6; min-height: 100vh;
    display: flex; align-items: center; justify-content: center;
    padding: 40px 24px;
  }

  .result-card {
    background: var(--white);
    border-radius: var(--radius-lg);
    width: 520px; max-width: 100%;
    overflow: hidden;
    box-shadow: var(--shadow-lg);
  }

  .result-hero {
    padding: 48px 40px;
    text-align: center;
    position: relative; overflow: hidden;
  }
  .result-hero.pass { background: linear-gradient(135deg, #0C3D25 0%, #1A6640 100%); }
  .result-hero.fail { background: linear-gradient(135deg, #3D0C0C 0%, #7A1A1A 100%); }

  .result-hero::before {
    content: '';
    position: absolute; inset: 0;
    background: url('assets/logo-circle.png') center/120px no-repeat;
    opacity: 0.05;
  }

  .result-icon { font-size: 64px; display: block; margin-bottom: 16px; }
  .result-title {
    font-family: 'Noto Serif KR', serif;
    font-size: 26px; font-weight: 700; color: var(--white);
  }
  .result-sub { color: rgba(255,255,255,0.65); font-size: 13px; margin-top: 6px; }

  .result-score-section {
    padding: 36px 40px;
    text-align: center;
    border-bottom: 1px solid var(--border);
  }
  .score-huge {
    font-family: 'Noto Serif KR', serif;
    font-size: 80px; font-weight: 900; line-height: 1;
  }
  .score-huge.pass { color: var(--success); }
  .score-huge.fail { color: var(--error); }
  .score-label { font-size: 13px; color: var(--text-mid); margin-top: 4px; }

  .result-details { padding: 24px 40px; }
  .detail-row {
    display: flex; justify-content: space-between; align-items: center;
    padding: 11px 0; border-bottom: 1px solid rgba(0,0,0,0.05);
    font-size: 14px;
  }
  .detail-row:last-child { border-bottom: none; }
  .detail-key { color: var(--text-mid); }
  .detail-val { font-weight: 600; color: var(--navy); }

  .result-actions {
    padding: 20px 40px 32px;
    display: flex; gap: 12px;
  }
</style>
</head>
<body>

<div class="result-card">
  <div class="result-hero" id="result-hero">
    <span class="result-icon" id="result-icon">ğŸ†</span>
    <div class="result-title" id="result-title">êµìœ¡ ìˆ˜ë£Œ</div>
    <div class="result-sub" id="result-sub"></div>
  </div>

  <div class="result-score-section">
    <div class="score-huge" id="result-score">-</div>
    <div class="score-label">ìµœì¢… ì ìˆ˜ (ìˆ˜ë£Œ ê¸°ì¤€: 70ì  ì´ìƒ)</div>
  </div>

  <div class="result-details">
    <div class="detail-row"><span class="detail-key">ì‘ì‹œì</span><span class="detail-val" id="r-name"></span></div>
    <div class="detail-row"><span class="detail-key">ì´ ë¬¸í•­</span><span class="detail-val" id="r-total"></span></div>
    <div class="detail-row"><span class="detail-key">ì •ë‹µ</span><span class="detail-val" id="r-correct"></span></div>
    <div class="detail-row"><span class="detail-key">ì˜¤ë‹µ</span><span class="detail-val" id="r-wrong"></span></div>
    <div class="detail-row"><span class="detail-key">ì‘ì‹œ íšŸìˆ˜</span><span class="detail-val" id="r-attempt"></span></div>
    <div class="detail-row"><span class="detail-key">ìˆ˜ë£Œ ì—¬ë¶€</span><span class="detail-val" id="r-pass"></span></div>
  </div>

  <div class="result-actions" id="result-actions"></div>
</div>

<div id="toast-container"></div>

<script>
const raw    = sessionStorage.getItem('kasg_result');
const user   = JSON.parse(sessionStorage.getItem('kasg_user') || '{}');
if (!raw) { window.location.href = 'dashboard.html'; throw 0; }
const result = JSON.parse(raw);

const { score, passed, correct, total, attempt } = result;

document.getElementById('result-hero').className  = 'result-hero ' + (passed ? 'pass' : 'fail');
document.getElementById('result-icon').textContent = passed ? 'ğŸ†' : 'ğŸ“‹';
document.getElementById('result-title').textContent = passed ? 'êµìœ¡ ìˆ˜ë£Œ ì™„ë£Œ!' : 'ë¯¸ìˆ˜ë£Œ';
document.getElementById('result-sub').textContent   = passed
  ? `${user.name}ë‹˜, ì¶•í•˜ë“œë¦½ë‹ˆë‹¤! ìˆ˜ë£Œ ê¸°ì¤€ì„ ë‹¬ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.`
  : `ì•„ì‰½ê²Œë„ ìˆ˜ë£Œ ê¸°ì¤€(70ì )ì— ë¯¸ë‹¬í•˜ì˜€ìŠµë‹ˆë‹¤. ${attempt < 2 ? 'ì¬ìˆ˜ê°• í›„ ì¬ì‘ì‹œ ê°€ëŠ¥í•©ë‹ˆë‹¤.' : 'ì‘ì‹œ ê¸°íšŒë¥¼ ëª¨ë‘ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.'}`;

const scoreEl = document.getElementById('result-score');
scoreEl.textContent  = score + 'ì ';
scoreEl.className    = 'score-huge ' + (passed ? 'pass' : 'fail');

document.getElementById('r-name').textContent    = `${user.name} (${user.org})`;
document.getElementById('r-total').textContent   = total + 'ë¬¸í•­';
document.getElementById('r-correct').textContent = correct + 'ê°œ';
document.getElementById('r-wrong').textContent   = (total - correct) + 'ê°œ';
document.getElementById('r-attempt').textContent = attempt + '/2íšŒ';
document.getElementById('r-pass').innerHTML      = passed
  ? '<span style="color:var(--success);font-weight:700">âœ… ìˆ˜ë£Œ</span>'
  : '<span style="color:var(--error);font-weight:700">âŒ ë¯¸ìˆ˜ë£Œ</span>';

const actions = document.getElementById('result-actions');
if (passed) {
  actions.innerHTML = `
    <button class="btn btn-outline" style="flex:1" onclick="window.location.href='dashboard.html'">ëŒ€ì‹œë³´ë“œ</button>
    <button class="btn btn-gold" style="flex:2" onclick="window.location.href='certificate.html'">ğŸ“ ìˆ˜ë£Œì¦ ë°œê¸‰</button>`;
} else if (attempt < 2) {
  actions.innerHTML = `
    <button class="btn btn-outline" style="flex:1" onclick="window.location.href='dashboard.html'">ëŒ€ì‹œë³´ë“œ</button>
    <button class="btn btn-primary" style="flex:2" onclick="window.location.href='player.html'">ğŸ“º ì¬ìˆ˜ê°• í›„ ì¬ì‘ì‹œ</button>`;
} else {
  actions.innerHTML = `
    <button class="btn btn-primary btn-block" onclick="window.location.href='dashboard.html'">ëŒ€ì‹œë³´ë“œë¡œ ì´ë™</button>`;
}
</script>
</body>
</html>
